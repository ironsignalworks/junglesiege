<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>Jungle Siege '79</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="icon" href="favicon.ico" type="image/x-icon" />
  <link href="https://fonts.googleapis.com/css?family=VT323|Orbitron:700|Staatliches&display=swap" rel="stylesheet" />
  <style>
    html, body { margin:0; padding:0; height:100%; background:#000; }
    #start-screen, #end-screen, #boss-announcement {
      position: fixed; inset: 0; display:flex; flex-direction:column;
      align-items:center; justify-content:center;
    }
    #gameCanvas {
      position: fixed; inset: 0;
      width: 100vw; height: 100vh; display:none;
      image-rendering: pixelated; image-rendering: crisp-edges;
    }
  </style>
</head>
<body>
  <!-- Start Screen -->
  <div id="start-screen">
    <h1></h1>
    <h2></h2>
    <button id="start-button" disabled>LOADING...</button>
  </div>

  <!-- Boss Announcement Overlay -->
  <div id="boss-announcement" style="display:none;color:#f03030;font-size:48px;text-shadow:0 0 12px #fff,0 0 6px #900;">
    <div id="boss-announcement-title">BOSS INCOMING &gt;</div>
    <div id="boss-announcement-name" style="font-size:58px;margin-top:30px;"></div>
  </div>

  <!-- Game Canvas -->
  <canvas id="gameCanvas" width="800" height="600"></canvas>

  <!-- Optional gameover image -->
  <img id="gameover-img" src="assets/images/gameover.png" alt="game over" style="display:none; position:absolute; left:-9999px;" />

  <!-- End Screen -->
  <div id="end-screen" style="display:none;color:white;text-align:center;background:rgba(0,0,0,0.4);font-family:sans-serif;font-size:34px;z-index:10;">
    <div id="end-message"></div>
    <div id="final-score" style="margin-top:10px;"></div>
    <div id="best-score" style="margin-top:5px;"></div>
    <button id="restart-button" style="margin-top:20px;padding:10px 20px;font-size:20px;">Restart</button>
  </div>

  <!-- Main module -->
  <script type="module" src="./src/main.js"></script>

  <!-- Tiny diagnostic if module fails to load -->
  <script>
    window.addEventListener('error', (e) => {
      if (String(e?.message || '').includes('Failed to load module script')) {
        const box = document.createElement('div');
        box.style.cssText =
          'position:fixed;left:50%;bottom:18px;transform:translateX(-50%);font:14px monospace;color:#ff6b6b;background:#000a;padding:8px 12px;border:1px solid #ff6b6b;border-radius:8px;z-index:999999;';
        box.textContent = 'ERROR: Could not load ./src/main.js â€” check path/case and serve via http:// (not file://)';
        document.body.appendChild(box);
      }
    });
  </script>
</body>
</html>
